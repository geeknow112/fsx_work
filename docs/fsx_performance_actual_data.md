# FSx 実際のパフォーマンスデータ分析

## データ取得期間
- **期間**: 2025年7月26日 〜 2025年8月2日（7日間）
- **ファイルシステム**: fs-0b2d61a3f2654a9a3 (SV-FILE)

## 実際の使用量データ

### データ読み取り量（日別）
| 日付 | 読み取り量 | MB換算 | GB換算 |
|------|------------|--------|--------|
| 2025-07-26 | 37,594,345 bytes | 35.8 MB | 0.035 GB |
| 2025-07-27 | 90,502,992 bytes | 86.3 MB | 0.084 GB |
| 2025-07-28 | 4,119,848,957 bytes | 3,928.4 MB | 3.84 GB |
| 2025-07-29 | 4,405,548,963 bytes | 4,200.8 MB | 4.10 GB |
| 2025-07-30 | 6,777,444,690 bytes | 6,462.4 MB | 6.31 GB |
| 2025-07-31 | 2,302,630,165 bytes | 2,196.0 MB | 2.14 GB |
| 2025-08-01 | 1,614,208,100 bytes | 1,539.4 MB | 1.50 GB |
| 2025-08-02 | 2,282,687 bytes | 2.2 MB | 0.002 GB |

### データ書き込み量（日別）
| 日付 | 書き込み量 | MB換算 | GB換算 |
|------|------------|--------|--------|
| 2025-07-26 | 17,676,129 bytes | 16.9 MB | 0.016 GB |
| 2025-07-27 | 14,561,227 bytes | 13.9 MB | 0.014 GB |
| 2025-07-28 | 243,920,816 bytes | 232.6 MB | 0.23 GB |
| 2025-07-29 | 598,504,406 bytes | 570.8 MB | 0.56 GB |
| 2025-07-30 | 665,327,577 bytes | 634.6 MB | 0.62 GB |
| 2025-07-31 | 917,847,257 bytes | 875.4 MB | 0.85 GB |
| 2025-08-01 | 1,146,476,408 bytes | 1,093.3 MB | 1.07 GB |
| 2025-08-02 | 115,283 bytes | 0.1 MB | 0.0001 GB |

## パフォーマンス分析

### 使用パターンの特徴
1. **平日（月〜金）の使用量が多い**
   - 7/28〜8/1: 高い使用量
   - 土日（7/26,27, 8/2）: 低い使用量

2. **読み取り中心の使用パターン**
   - 読み取り：書き込み = 約 4:1 〜 6:1 の比率

3. **ピーク日の使用量**
   - 最大読み取り: 6.31 GB/日（7/30）
   - 最大書き込み: 1.07 GB/日（8/1）

### スループット使用率の計算

#### 設定スループット容量: 32 MB/s
#### 1日あたりの理論最大転送量: 32 MB/s × 86,400秒 = 2,764,800 MB = 2,700 GB

#### 実際の使用率
| 日付 | 読み取り使用率 | 書き込み使用率 | 合計使用率 |
|------|----------------|----------------|------------|
| 2025-07-30 | 0.23% | 0.02% | 0.25% |
| 2025-07-29 | 0.15% | 0.02% | 0.17% |
| 2025-07-28 | 0.14% | 0.01% | 0.15% |
| 2025-08-01 | 0.06% | 0.04% | 0.10% |
| 2025-07-31 | 0.08% | 0.03% | 0.11% |

## 最適化の提案

### 1. スループット容量の大幅削減が可能
**現在**: 32 MB/s
**推奨**: 8 MB/s または 16 MB/s

**根拠**:
- 現在の使用率は最大でも0.25%
- 8 MB/sでも十分な余裕がある
- **コスト削減効果**: 約75%削減可能

### 2. 料金削減効果の試算
**現在のスループット料金**: 32 MB/s × $2.20 = $70.4/月
**8 MB/sに変更**: 8 MB/s × $2.20 = $17.6/月
**削減額**: $52.8/月 = 約7,920円/月

### 3. IOPS使用量の確認が必要
- 現在の設定: 21,600 IOPS
- 実際の使用量確認が必要
- 手動設定で最適化の余地あり

### 4. 使用パターンに基づく推奨事項

#### 短期的改善（即座に実施可能）
1. **スループット容量を16 MB/sに削減**
   - リスクが低く、50%のコスト削減
   - 月額約3,960円の削減

#### 中期的改善（1ヶ月後に検討）
1. **8 MB/sへのさらなる削減**
   - 使用パターンが安定していることを確認後
   - 追加で約1,980円/月の削減

2. **IOPS設定の最適化**
   - 手動設定で3,000〜6,000 IOPSに削減可能性

## 監視とアラートの設定推奨

### 設定すべきアラート
1. **スループット使用率 > 70%**
2. **日次データ転送量 > 10 GB**
3. **IOPS使用率 > 70%**

### 継続監視項目
- 週次使用量レポート
- 月次コスト分析
- 四半期パフォーマンス見直し

## 注意事項
- スループット変更は業務時間外に実施
- 変更前に関係者への通知が必要
- 変更後1週間は使用量を注意深く監視
